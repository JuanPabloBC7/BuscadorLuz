nIngreso equ 0x21
var2show equ 0x22
dato	 equ 0x23
comprobacion equ 0x24
d1	equ 0x25
d2	equ 0x26

START
	BSF STATUS, RP0
	BCF STATUS, RP1

	MOVLW b'11111111'
	MOVWF TRISB

	MOVLW b'11111111'
	MOVWF TRISD

	MOVLW B'0000000'
	MOVWF TRISC

	BCF STATUS, RP0
	BCF STATUS, RP1


Inicio
	CALL delay
	CALL delay
	BTFSC PORTB, 7
	GOTO BTN0
	BTFSC PORTB, 6
	GOTO BTN1
	BTFSC PORTB, 5
	GOTO BTN2
	BTFSC PORTB, 4
	GOTO BTN3
	BTFSC PORTB, 3
	GOTO BTN4
	BTFSC PORTB, 2
	GOTO BTN5
	BTFSC PORTB, 1
	GOTO BTN6
	BTFSC PORTB, 0
	GOTO BTN7
	BTFSC PORTD, 7
	GOTO BTN8
	BTFSC PORTD, 6
	GOTO BTN9
	
	GOTO Inicio
Diminuir
	CALL delay
	CALL delay
	CALL delay
	CALL delay
	CALL delay
	CALL delay
	MOVF nIngreso, w
	MOVWF var2show
	CALL MostrarDisplay
	INCF nIngreso, 1
	
	

	movlw d'9'
	subwf nIngreso, 0
	BTFSC STATUS, Z
	goto finAumentar
	goto Diminuir
	
	
FinAumentar
	CALL delay
	CALL delay
	CALL delay
	CALL delay
	CALL delay
	CALL delay
	movlw d'9'
	movwf var2show
	CALL MostrarDisplay
	CALL delay
	CALL delay
	CALL delay
	CALL delay
	CALL delay
	CALL delay
MuestraGuion
	movlw b'1111111'
	movwf portc
	bcf portc, 7

	CALL delay
	CALL delay
	BTFSC PORTB, 7
	GOTO BTN0
	BTFSC PORTB, 6
	GOTO BTN1
	BTFSC PORTB, 5
	GOTO BTN2
	BTFSC PORTB, 4
	GOTO BTN3
	BTFSC PORTB, 3
	GOTO BTN4
	BTFSC PORTB, 2
	GOTO BTN5
	BTFSC PORTB, 1
	GOTO BTN6
	BTFSC PORTB, 0
	GOTO BTN7
	BTFSC PORTD, 7
	GOTO BTN8
	BTFSC PORTD, 6
	GOTO BTN9



	goto MuestraGuion



BTN0
	MOVLW	d'0'
	MOVWF   nIngreso
	GOTO Diminuir
BTN1
	MOVLW	d'1'
	MOVWF   nIngreso
	GOTO Diminuir
BTN2
	MOVLW	d'2'
	MOVWF   nIngreso
	GOTO Diminuir
BTN3
	MOVLW	d'3'
	MOVWF   nIngreso
	GOTO Diminuir
BTN4
	MOVLW	d'4'
	MOVWF   nIngreso
	GOTO Diminuir

BTN5
	MOVLW	d'5'
	MOVWF   nIngreso
	GOTO Diminuir
BTN6
	MOVLW	d'6'
	MOVWF   nIngreso
	GOTO Diminuir
BTN7
	MOVLW	d'7'
	MOVWF   nIngreso
	GOTO Diminuir
BTN8
	MOVLW	d'8'
	MOVWF   nIngreso
	RETURN
BTN9
	MOVLW	d'9'
	MOVWF   nIngreso
	GOTO Diminuir


;;; Inicia Display ;;;
MOSTRARDISPLAY	
	BTFSS var2show, 0		; SALTA LÍNEA SI PRIMER BIT ES 1
	GOTO BITXXX0		; SI PRIMER BIT ES 0
	GOTO BITXXX1		; SI PRIMER BIT ES 1	
	
; PRIMER BIT ES 0
BITXXX0
	BTFSS var2show, 1	; SALTA LÍNEA SI SEGUNDO BIT ES 1
	GOTO BITXX00		; 00
	GOTO BITXX10		; 10
; PRIMER BIT ES 1
BITXXX1
	BTFSS var2show, 1	; SALTA SI SEGUNDO BIT ES 1
	GOTO BITXX01		; 01
	GOTO BITXX11		; 11
;00
BITXX00
	BTFSS var2show, 2	; SALTA LÍNEA SI TERCER BIT ES 1
	GOTO BITX000		; 000
	GOTO BITX100		; 100		-> 4	0110011
;10
BITXX10
	BTFSS var2show, 2	; SALTA LÍNEA SI TERCER BIT ES 1
	GOTO BITX010		; 010		-> 2	1101101
	GOTO BITX110		; 110		-> 6	1011111
	
;01
BITXX01
	BTFSS var2show, 2	; SALTA LÍNEA SI TERCER BIT ES 1
	GOTO BITX001		; 001		
	GOTO BITX101		; 101		-> 5	1011011
	
;11
BITXX11
	BTFSS var2show, 2	; SALTA LÍNEA SI TERCER BIT ES 1
	GOTO BITX011		; 011		-> 3	1111001
	GOTO BITX111		; 111		-> 7	1110000
		
;000
BITX000
	BTFSS	var2show, 3	; SALTA LÍNEA SI CUARTO BIT ES 1
	GOTO BIT0000	; 0000		-> 0		1111110
	GOTO BIT1000	; 1000		-> 8		1111111
	
;001
BITX001
	BTFSS var2show, 3	; SALTA LÍNEA SI CUARTO BIT ES 1
	GOTO BIT0001	; 0001		-> 1		0110000
	GOTO BIT1001	; 1001		-> 9		0001100
	
	
; #0
BIT0000
	MOVLW	B'10000001' ; EN W SE ENCUENTRA 1111110
	MOVWF	DATO		; DE W A F LE MOVEMOS F
	GOTO DISPLAY
	
; #1
BIT0001
	MOVLW	B'11100111' ; EN W SE ENCUENTRA 0110000
	MOVWF	DATO		; DE W A F LE MOVEMOS F
	GOTO DISPLAY
	
; #2
BITX010
	MOVLW	B'01001001' ; EN W SE ENCUENTRA 1101101
	MOVWF	DATO		; DE W A F LE MOVEMOS F
	GOTO DISPLAY
	
; #3
BITX011
	MOVLW	B'01000011'
	MOVWF	DATO		; DE W A F LE MOVEMOS F
	GOTO DISPLAY
	
; #4
BITX100
	MOVLW	B'00100111'
	MOVWF	DATO		; DE W A F LE MOVEMOS F
	GOTO DISPLAY
	RETURN
; #5
BITX101
	MOVLW	B'00010011'
	MOVWF	DATO		; DE W A F LE MOVEMOS F
	GOTO DISPLAY
	RETURN
; #6
BITX110
	MOVLW	B'00010001'
	MOVWF	DATO		; DE W A F LE MOVEMOS F
	GOTO DISPLAY
	
; #7
BITX111
	MOVLW	B'11000111'
	MOVWF	DATO		; DE W A F LE MOVEMOS F
	GOTO DISPLAY
	RETURN
; #8
BIT1000
	MOVLW	B'00000001' ; EN W SE ENCUENTRA 1111111
	MOVWF	DATO		; DE W A F LE MOVEMOS F
	GOTO DISPLAY
	RETURN
; #9
BIT1001
	MOVLW	B'00000011' ; EN W SE ENCUENTRA 0001100
	MOVWF	DATO		; DE W A F LE MOVEMOS F
	GOTO DISPLAY
	

DISPLAY
	MOVF	DATO, W
	MOVWF	PORTC	
	RETURN
;;;;;;; Acaba Display ;;;;;;;;;

Delay
			;1693 cycles
	movlw	0x52
	movwf	d1
	movlw	0x02
	movwf	d2
Delay_0
	decfsz	d1, f
	goto	$+2
	decfsz	d2, f
	goto	Delay_0

			;3 cycles
	goto	$+1
	nop

			;4 cycles (including call)
	return
