
DATO	EQU 0X21
d1   	EQU 0X22
d2	EQU 0X23
d3	EQU 0X24
d4	EQU 0x25
d5	EQU 0X26
INICIO
	ORG	0X00


	BSF	STATUS, 5 ; Colocamos en 1 el bit 5 de reg. estatus 
; en el banco 1 tenemos trisa, trisb, ... , trisd
; debemos configurar puerto de entrada y salida..
; puerto b
	CLRF	TRISB		; CLEAR FILE CONFIGURA EL PUERTO B PARA QUE SEA SALIDA (0 = SALIDA)
	BSF TRISC, 7		; PUERTO C -> ENTRADA
	CLRF 	TRISD		; PUERTO D -> SALIDA

	BCF	STATUS, RP0		;BITCLEAR FILE DE RP0 = BIT CLEARFY 5
	
	movlw 0x00;
	movwf	portb;
	movlw 0x00;
	movwf portd;


START	
	CALL PASOADELANTE
	CALL MOVIMIENTOBDELANTE
	CALL PASOADELANTE
	CALL MOVIMIENTOBDETRAZ
	CALL PASOADELANTE
	CALL MOVIMIENTOBDELANTE
	CALL PASOADELANTE
	CALL MOVIMIENTOBDETRAZ
	GOTO START

END







PASOADELANTE
	CALL PASO1A
	CALL DELAY
	CALL PASO2A
	CALL DELAY
	CALL PASO3A
	CALL DELAY
	CALL PASO4A
	CALL DELAY
	RETURN	
PASOAREVEZ
	CALL PASO4A
	CALL DELAY
	CALL PASO3A
	CALL DELAY
	CALL PASO2A
	CALL DELAY
	CALL PASO1A
	CALL DELAY
	RETURN	

PASOBDELANTE
	CALL PASO1B
	CALL DELAY
	CALL PASO2B
	CALL DELAY
	CALL PASO3B
	CALL DELAY
	CALL PASO4B
	RETURN

PASOBREVEZ
	CALL PASO4B
	CALL DELAY
	CALL PASO3B
	CALL DELAY
	CALL PASO2B
	CALL DELAY
	CALL PASO1B
	RETURN

	
PASO1A
	MOVLW	B'00001100' 	; EN W SE ENCUENTRA 0001100
	MOVWF	DATO		; DE W A F LE MOVEMOS F
	CALL DISPLAYA
	RETURN
PASO2A
	MOVLW	B'00000110' ; EN W SE ENCUENTRA 0001100
	MOVWF	DATO		; DE W A F LE MOVEMOS F
	CALL DISPLAYA
	RETURN
PASO3A
	MOVLW	B'00000011' ; EN W SE ENCUENTRA 0001100
	MOVWF	DATO		; DE W A F LE MOVEMOS F
	CALL DISPLAYA
	RETURN
PASO4A
	MOVLW	B'00001001' ; EN W SE ENCUENTRA 0001100
	MOVWF	DATO		; DE W A F LE MOVEMOS F
	CALL DISPLAYA
	RETURN

PASO1B
	MOVLW	B'00001100' ; EN W SE ENCUENTRA 0001100
	MOVWF	DATO		; DE W A F LE MOVEMOS F
	CALL DISPLAYB
	RETURN
PASO2B
	MOVLW	B'00000110' ; EN W SE ENCUENTRA 0001100
	MOVWF	DATO		; DE W A F LE MOVEMOS F
	CALL DISPLAYB
	RETURN
PASO3B
	MOVLW	B'00000011' ; EN W SE ENCUENTRA 0001100
	MOVWF	DATO		; DE W A F LE MOVEMOS F
	CALL DISPLAYB
	RETURN
PASO4B
	MOVLW	B'00001001' ; EN W SE ENCUENTRA 0001100
	MOVWF	DATO		; DE W A F LE MOVEMOS F
	CALL DISPLAYB
	RETURN



DISPLAYA
	MOVF	DATO, W
	MOVWF	PORTB	
	RETURN

DISPLAYB
	; Se limpia mitad de puertos inservibles
	BCF PORTB, 4
	BCF PORTB, 5
	BCF PORTB, 6
	BCF PORTB, 7

		; jeje

	RLF DATO, 1
	RLF DATO, 1
	RLF DATO, 1
	RLF DATO, 1

	MOVF	DATO, W
	IORWF	PORTB, 1	; OR ENTRE DATO Y PUERTOB

	RETURN

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
MOVIMIENTOBDELANTE
	movlw d'10'
	movwf d5
INICIOMOVIMIENTOA1
	decfsz d5, 1
	GOTO A1
	RETURN
A1
	CALL PASOBDELANTE 	; 32 PASOS
	GOTO INICIOMOVIMIENTOA1
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
MOVIMIENTOBDETRAZ
	movlw d'10'
	movwf d5
INICIOMOVIMIENTOA2
	decfsz d5, 1
	GOTO A2
	RETURN
A2
	CALL PASOBREVEZ	; 32 PASOS
	GOTO INICIOMOVIMIENTOA2
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;

	
Delay
			;1693 cycles
	movlw	0x52
	movwf	d1
	movlw	0x02
	movwf	d2
Delay_0
	decfsz	d1, f
	goto	$+2
	decfsz	d2, f
	goto	Delay_0

			;3 cycles
	goto	$+1
	nop

			;4 cycles (including call)
	return
; Generated by http://w