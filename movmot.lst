---------------------------------------------
PIC ASSEMBLER LISTING
Line    Address Opcode  Instruction
---------------------------------------------
0001    0000            ;;; 160 PASOS EN X
0002    0000            DATO	EQU 0X21
0003    0000            d1   	EQU 0X22
0004    0000            d2	EQU 0X23
0005    0000            d3	EQU 0X24
0006    0000            d4	EQU 0x25
0007    0000            d5	EQU 0X26
0008    0000            d6	EQU 0X27
0009    0000            d7	EQU 0X28
0010    0000            d8	EQU 0x29
0011    0000            d9	EQU 0X2A
0012    0000            x	EQU 0x2B
0013    0000            y	EQU 0x2C
0014    0000            x_f	EQU 0x2D
0015    0000            y_f	EQU 0X2E
0016    0000            cond_x	EQU 0x30
0017    0000            cond_y	EQU 0x31
0018    0000            d10	EQU 0x32
0019    0000            d11	EQU 0x33
0020    0000            luzAct	EQU 0x34
0021    0000            
0022    0000            INICIO
0023    0000            	ORG	0X00
0024    0000            
0025    0000            
0026    0000    1683    	BSF	STATUS, 5 ; Colocamos en 1 el bit 5 de reg. estatus 
0027    0001            ; en el banco 1 tenemos trisa, trisb, ... , trisd
0028    0001            ; debemos configurar puerto de entrada y salida..
0029    0001            ; puerto b
0030    0001    0186    	CLRF	TRISB		; CLEAR FILE CONFIGURA EL PUERTO B PARA QUE SEA SALIDA (0 = SALIDA)
0031    0002            	;BSF TRISC, 7		; PUERTO C -> ENTRADA
0032    0002    0188    	CLRF 	TRISD		; PUERTO D -> SALIDA
0033    0003    0187    	CLRF 	TRISC		; PUERTO C -> SALIDA
0034    0004            
0035    0004            
0036    0004    1283    	BCF	STATUS, RP0		;BITCLEAR FILE DE RP0 = BIT CLEARFY 5
0037    0005            	
0038    0005    3000    	movlw 0x00;
0039    0006    0086    	movwf	portb;
0040    0007    3000    	movlw 0x00;
0041    0008    0088    	movwf portd;
0042    0009            
0043    0009            
0044    0009            
0045    0009            START
0046    0009    300E    	movlw	d'14'
0047    000A    00AD    	movwf	x_f
0048    000B    3032    	movlw	d'50'
0049    000C    00AE    	movwf	y_f
0050    000D            	
0051    000D    3003    	movlw	d'3'
0052    000E    00B4    	movwf	luzact
0053    000F            	
0054    000F    3000    	movlw   d'0'
0055    0010    00AB    	movwf	x
0056    0011    3000    	movlw	d'0'
0057    0012    00AC    	movwf	y
0058    0013    20BC    	CALL MOSTRARDISPLAY
0059    0014            
0060    0014            HOLA
0061    0014    2814    	GOTO HOLA
0062    0015            
0063    0015            
0064    0015    201C    	CALL Buscar_X
0065    0016    2026    	CALL Buscar_Y
0066    0017            
0067    0017    209C    	CALL MovimientoDelanteCompleto
0068    0018    20A8    	CALL MovimientoDetrazCompleto
0069    0019            
0070    0019            END
0071    0019            	
0072    0019            
0073    0019            
0074    0019            REC_FINAL
0075    0019    201C    	CALL Buscar_X
0076    001A    2026    	CALL Buscar_Y
0077    001B    0008    	RETURN
0078    001C            	
0079    001C            ;;;;;
0080    001C            BUSCAR_X
0081    001C    2094    	CALL MOVIMIENTOADELANTE
0082    001D    0AAB    	INCF x, 1
0083    001E    082D    	movf x_f, W
0084    001F    00B3    	movwf d11
0085    0020            INICIOBUSCAx
0086    0020    0BB3    	decfsz d11, 1
0087    0021    2823    	GOTO b13
0088    0022    0008    	RETURN
0089    0023            B13
0090    0023    2094    	CALL MOVIMIENTOADELANTE		; 10 PASOADELANTE
0091    0024    0AAB    	INCF x, 1	
0092    0025    2820    	GOTO INICIOBUSCAx
0093    0026            ;;;;
0094    0026            ;;;;;
0095    0026            BUSCAR_Y
0096    0026    2044    	CALL PASOBDELANTE
0097    0027    2044    	CALL PASOBDELANTE
0098    0028    0AAC    	INCF Y, 1
0099    0029    082E    	movf y_f, W
0100    002A    00B2    	movwf d10
0101    002B            INICIOBUSCAy
0102    002B    0BB2    	decfsz d10, 1
0103    002C    282E    	GOTO B14
0104    002D    0008    	RETURN
0105    002E            B14
0106    002E    2044    	CALL PASOBDELANTE
0107    002F    2044    	CALL PASOBDELANTE
0108    0030    0AAC    	INCF Y, 1
0109    0031    282B    	GOTO INICIOBUSCAy
0110    0032            ;;;;
0111    0032            
0112    0032            
0113    0032            
0114    0032            PASOADELANTE
0115    0032    2054    	CALL PASO1A
0116    0033    20B1    	CALL DELAY
0117    0034    2058    	CALL PASO2A
0118    0035    20B1    	CALL DELAY
0119    0036    205C    	CALL PASO3A
0120    0037    20B1    	CALL DELAY
0121    0038    2060    	CALL PASO4A
0122    0039    20B1    	CALL DELAY
0123    003A    0008    	RETURN	
0124    003B            PASOAREVEZ
0125    003B    2060    	CALL PASO4A
0126    003C    20B1    	CALL DELAY
0127    003D    205C    	CALL PASO3A
0128    003E    20B1    	CALL DELAY
0129    003F    2058    	CALL PASO2A
0130    0040    20B1    	CALL DELAY
0131    0041    2054    	CALL PASO1A
0132    0042    20B1    	CALL DELAY
0133    0043    0008    	RETURN	
0134    0044            
0135    0044            PASOBDELANTE
0136    0044    2064    	CALL PASO1B
0137    0045    20B1    	CALL DELAY
0138    0046    2068    	CALL PASO2B
0139    0047    20B1    	CALL DELAY
0140    0048    206C    	CALL PASO3B
0141    0049    20B1    	CALL DELAY
0142    004A    2070    	CALL PASO4B
0143    004B    0008    	RETURN
0144    004C            
0145    004C            PASOBREVEZ
0146    004C    2070    	CALL PASO4B
0147    004D    20B1    	CALL DELAY
0148    004E    206C    	CALL PASO3B
0149    004F    20B1    	CALL DELAY
0150    0050    2068    	CALL PASO2B
0151    0051    20B1    	CALL DELAY
0152    0052    2064    	CALL PASO1B
0153    0053    0008    	RETURN
0154    0054            
0155    0054            	
0156    0054            PASO1A
0157    0054    300C    	MOVLW	B'00001100' 	; EN W SE ENCUENTRA 0001100
0158    0055    00A1    	MOVWF	DATO		; DE W A F LE MOVEMOS F
0159    0056    2074    	CALL DISPLAYA
0160    0057    0008    	RETURN
0161    0058            PASO2A
0162    0058    3006    	MOVLW	B'00000110' ; EN W SE ENCUENTRA 0001100
0163    0059    00A1    	MOVWF	DATO		; DE W A F LE MOVEMOS F
0164    005A    2074    	CALL DISPLAYA
0165    005B    0008    	RETURN
0166    005C            PASO3A
0167    005C    3003    	MOVLW	B'00000011' ; EN W SE ENCUENTRA 0001100
0168    005D    00A1    	MOVWF	DATO		; DE W A F LE MOVEMOS F
0169    005E    2074    	CALL DISPLAYA
0170    005F    0008    	RETURN
0171    0060            PASO4A
0172    0060    3009    	MOVLW	B'00001001' ; EN W SE ENCUENTRA 0001100
0173    0061    00A1    	MOVWF	DATO		; DE W A F LE MOVEMOS F
0174    0062    2074    	CALL DISPLAYA
0175    0063    0008    	RETURN
0176    0064            
0177    0064            PASO1B
0178    0064    300C    	MOVLW	B'00001100' ; EN W SE ENCUENTRA 0001100
0179    0065    00A1     	MOVWF	DATO		; DE W A F LE MOVEMOS F
0180    0066    2077    	CALL DISPLAYB
0181    0067    0008    	RETURN
0182    0068            PASO2B
0183    0068    3006    	MOVLW	B'00000110' ; EN W SE ENCUENTRA 0001100
0184    0069    00A1    	MOVWF	DATO		; DE W A F LE MOVEMOS F
0185    006A    2077    	CALL DISPLAYB
0186    006B    0008    	RETURN
0187    006C            PASO3B
0188    006C    3003    	MOVLW	B'00000011' ; EN W SE ENCUENTRA 0001100
0189    006D    00A1    	MOVWF	DATO		; DE W A F LE MOVEMOS F
0190    006E    2077    	CALL DISPLAYB
0191    006F    0008    	RETURN
0192    0070            PASO4B
0193    0070    3009    	MOVLW	B'00001001' ; EN W SE ENCUENTRA 0001100
0194    0071    00A1    	MOVWF	DATO		; DE W A F LE MOVEMOS F
0195    0072    2077    	CALL DISPLAYB
0196    0073    0008    	RETURN
0197    0074            
0198    0074            
0199    0074            
0200    0074            DISPLAYA
0201    0074    0821    	MOVF	DATO, W
0202    0075    0086    	MOVWF	PORTB	
0203    0076    0008    	RETURN
0204    0077            
0205    0077            DISPLAYB
0206    0077            	; Se limpia mitad de puertos inservibles
0207    0077    1206    	BCF PORTB, 4
0208    0078    1286    	BCF PORTB, 5
0209    0079    1306    	BCF PORTB, 6
0210    007A    1386    	BCF PORTB, 7
0211    007B            
0212    007B            	
0213    007B            	; Shift para colocar en parte más significativa
0214    007B    0DA1    	RLF DATO, 1
0215    007C    0DA1    	RLF DATO, 1
0216    007D    0DA1    	RLF DATO, 1
0217    007E    0DA1    	RLF DATO, 1
0218    007F            
0219    007F    0821    	MOVF	DATO, W
0220    0080    0486    	IORWF	PORTB, 1 ; OR ENTRE DATO Y PUERTOB
0221    0081    0008    	RETURN
0222    0082            
0223    0082            ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0224    0082            MOVIMIENTOBDELANTE
0225    0082    300A    	movlw d'10'
0226    0083    00A6    	movwf d5
0227    0084            INICIOMOVIMIENTOB1
0228    0084    0BA6    	decfsz d5, 1
0229    0085    2887    	GOTO B1
0230    0086    0008    	RETURN
0231    0087            B1
0232    0087    2044    	CALL PASOBDELANTE 	; 32 PASOS
0233    0088    2044    	CALL PASOBDELANTE
0234    0089    0AAC    	INCF y, 1
0235    008A    2884    	GOTO INICIOMOVIMIENTOB1
0236    008B            ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0237    008B            MOVIMIENTOBDETRAZ
0238    008B    3005    	movlw d'5'
0239    008C    00A7    	movwf d6
0240    008D            INICIOMOVIMIENTOB2
0241    008D    0BA7    	decfsz d6, 1
0242    008E    2890    	GOTO B2
0243    008F    0008    	RETURN
0244    0090            B2
0245    0090    204C    	CALL PASOBREVEZ	; 32 PASOS
0246    0091    204C    	CALL PASOBREVEZ
0247    0092    03AC    	DECF y, 1
0248    0093    288D    	GOTO INICIOMOVIMIENTOB2
0249    0094            ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0250    0094            ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0251    0094            MOVIMIENTOADELANTE
0252    0094    3005    	movlw d'5'
0253    0095    00A8    	movwf d7
0254    0096            INICIOMOVIMIENTOA1
0255    0096    0BA8    	decfsz d7, 1
0256    0097    2899    	GOTO A1
0257    0098    0008    	RETURN
0258    0099            A1
0259    0099    2032    	CALL PASOADELANTE	; 32 PASOS
0260    009A    2032    	CALL PASOADELANTE
0261    009B    2896    	GOTO INICIOMOVIMIENTOA1
0262    009C            ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
0263    009C            MovimientoDelanteCompleto
0264    009C    3011    	movlw d'17'
0265    009D    00A9    	movwf d8
0266    009E            INICIOMOVIMIENTOC1
0267    009E    0BA9    	decfsz d8, 1
0268    009F    28A1    	GOTO C1
0269    00A0    0008    	RETURN
0270    00A1            C1
0271    00A1    2094    	CALL MOVIMIENTOADELANTE		; 10 PASOADELANTE
0272    00A2    0AAB    	INCF x, 1	
0273    00A3    2082    	CALL MOVIMIENTOBDELANTE
0274    00A4    2094    	CALL MOVIMIENTOADELANTE		; 10 PASOADELANTE
0275    00A5    0AAB    	INCF x, 1
0276    00A6    208B    	CALL MOVIMIENTOBDETRAZ
0277    00A7    289E    	GOTO INICIOMOVIMIENTOC1
0278    00A8            
0279    00A8            MovimientoDetrazCompleto
0280    00A8    30FF    	movlw d'255'
0281    00A9    00AA    	movwf d9
0282    00AA            INICIOMOVIMIENTOD1
0283    00AA    0BAA    	decfsz d9, 1
0284    00AB    28AF    	GOTO MOVD1
0285    00AC    3000    	MOVLW	B'0' 	; EN W SE ENCUENTRA 0
0286    00AD    00AB    	MOVWF	x	; Movemos a x, w -> x = 0 (reseteamos x)
0287    00AE            
0288    00AE            
0289    00AE    0008    	RETURN
0290    00AF            MOVD1
0291    00AF    203B    	CALL PASOAREVEZ			
0292    00B0    28AA    	GOTO INICIOMOVIMIENTOD1		
0293    00B1            
0294    00B1            
0295    00B1            	
0296    00B1            Delay
0297    00B1            			;1693 cycles
0298    00B1    3052    	movlw	0x52
0299    00B2    00A2    	movwf	d1
0300    00B3    3002    	movlw	0x02
0301    00B4    00A3    	movwf	d2
0302    00B5            Delay_0
0303    00B5    0BA2    	decfsz	d1, f
0304    00B6    28B8    	goto	$+2
0305    00B7    0BA3    	decfsz	d2, f
0306    00B8    28B5    	goto	Delay_0
0307    00B9            
0308    00B9            			;3 cycles
0309    00B9    28BA    	goto	$+1
0310    00BA    0000    	nop
0311    00BB            
0312    00BB            			;4 cycles (including call)
0313    00BB    0008    	return
0314    00BC            ; Generated by http://w
0315    00BC            
0316    00BC            ;;;;;;; ;;;;MOSTRAR DISPLAY ;;;;;;;;;
0317    00BC            MOSTRARDISPLAY	
0318    00BC    1C34    	BTFSS luzAct, 0		; SALTA LÍNEA SI PRIMER BIT ES 1
0319    00BD    28BF    	GOTO BITXXX0		; SI PRIMER BIT ES 0
0320    00BE    28C2    	GOTO BITXXX1		; SI PRIMER BIT ES 1	
0321    00BF            	
0322    00BF            ; PRIMER BIT ES 0
0323    00BF            BITXXX0
0324    00BF    1CB4    	BTFSS luzAct, 1	; SALTA LÍNEA SI SEGUNDO BIT ES 1
0325    00C0    28C5    	GOTO BITXX00		; 00
0326    00C1    28C8    	GOTO BITXX10		; 10
0327    00C2            ; PRIMER BIT ES 1
0328    00C2            BITXXX1
0329    00C2    1CB4    	BTFSS luzAct, 1	; SALTA SI SEGUNDO BIT ES 1
0330    00C3    28CB    	GOTO BITXX01		; 01
0331    00C4    28CE    	GOTO BITXX11		; 11
0332    00C5            ;00
0333    00C5            BITXX00
0334    00C5    1D34    	BTFSS luzAct, 2	; SALTA LÍNEA SI TERCER BIT ES 1
0335    00C6    28D1    	GOTO BITX000		; 000
0336    00C7    28E3    	GOTO BITX100		; 100		-> 4	0110011
0337    00C8            ;10
0338    00C8            BITXX10
0339    00C8    1D34    	BTFSS luzAct, 2	; SALTA LÍNEA SI TERCER BIT ES 1
0340    00C9    28DD    	GOTO BITX010		; 010		-> 2	1101101
0341    00CA    28EB    	GOTO BITX110		; 110		-> 6	1011111
0342    00CB            	
0343    00CB            ;01
0344    00CB            BITXX01
0345    00CB    1D34    	BTFSS luzAct, 2	; SALTA LÍNEA SI TERCER BIT ES 1
0346    00CC    28D4    	GOTO BITX001		; 001		
0347    00CD    28E7    	GOTO BITX101		; 101		-> 5	1011011
0348    00CE            	
0349    00CE            ;11
0350    00CE            BITXX11
0351    00CE    1D34    	BTFSS luzAct, 2	; SALTA LÍNEA SI TERCER BIT ES 1
0352    00CF    28E0    	GOTO BITX011		; 011		-> 3	1111001
0353    00D0    28EE    	GOTO BITX111		; 111		-> 7	1110000
0354    00D1            		
0355    00D1            ;000
0356    00D1            BITX000
0357    00D1    1DB4    	BTFSS	luzAct, 3	; SALTA LÍNEA SI CUARTO BIT ES 1
0358    00D2    28D7    	GOTO BIT0000	; 0000		-> 0		1111110
0359    00D3    28F2    	GOTO BIT1000	; 1000		-> 8		1111111
0360    00D4            	
0361    00D4            ;001
0362    00D4            BITX001
0363    00D4    1DB4    	BTFSS luzAct, 3	; SALTA LÍNEA SI CUARTO BIT ES 1
0364    00D5    28DA    	GOTO BIT0001	; 0001		-> 1		0110000
0365    00D6    28F6    	GOTO BIT1001	; 1001		-> 9		0001100
0366    00D7            	
0367    00D7            	
0368    00D7            ; #0
0369    00D7            BIT0000
0370    00D7    3081    	MOVLW	B'10000001' ; EN W SE ENCUENTRA 1111110
0371    00D8    00A1    	MOVWF	DATO		; DE W A F LE MOVEMOS F
0372    00D9    28F9    	GOTO DISPLAY
0373    00DA            	
0374    00DA            ; #1
0375    00DA            BIT0001
0376    00DA    30E7    	MOVLW	B'11100111' ; EN W SE ENCUENTRA 0110000
0377    00DB    00A1    	MOVWF	DATO		; DE W A F LE MOVEMOS F
0378    00DC    28F9    	GOTO DISPLAY
0379    00DD            	
0380    00DD            ; #2
0381    00DD            BITX010
0382    00DD    3049    	MOVLW	B'01001001' ; EN W SE ENCUENTRA 1101101
0383    00DE    00A1    	MOVWF	DATO		; DE W A F LE MOVEMOS F
0384    00DF    28F9    	GOTO DISPLAY
0385    00E0            	
0386    00E0            ; #3
0387    00E0            BITX011
0388    00E0    3043    	MOVLW	B'01000011'
0389    00E1    00A1    	MOVWF	DATO		; DE W A F LE MOVEMOS F
0390    00E2    28F9    	GOTO DISPLAY
0391    00E3            	
0392    00E3            ; #4
0393    00E3            BITX100
0394    00E3    3027    	MOVLW	B'00100111'
0395    00E4    00A1    	MOVWF	DATO		; DE W A F LE MOVEMOS F
0396    00E5    28F9    	GOTO DISPLAY
0397    00E6    0008    	RETURN
0398    00E7            ; #5
0399    00E7            BITX101
0400    00E7    3013    	MOVLW	B'00010011'
0401    00E8    00A1    	MOVWF	DATO		; DE W A F LE MOVEMOS F
0402    00E9    28F9    	GOTO DISPLAY
0403    00EA    0008    	RETURN
0404    00EB            ; #6
0405    00EB            BITX110
0406    00EB    3011    	MOVLW	B'00010001'
0407    00EC    00A1    	MOVWF	DATO		; DE W A F LE MOVEMOS F
0408    00ED    28F9    	GOTO DISPLAY
0409    00EE            	
0410    00EE            ; #7
0411    00EE            BITX111
0412    00EE    30C7    	MOVLW	B'11000111'
0413    00EF    00A1    	MOVWF	DATO		; DE W A F LE MOVEMOS F
0414    00F0    28F9    	GOTO DISPLAY
0415    00F1    0008    	RETURN
0416    00F2            ; #8
0417    00F2            BIT1000
0418    00F2    3001    	MOVLW	B'00000001' ; EN W SE ENCUENTRA 1111111
0419    00F3    00A1    	MOVWF	DATO		; DE W A F LE MOVEMOS F
0420    00F4    28F9    	GOTO DISPLAY
0421    00F5    0008    	RETURN
0422    00F6            ; #9
0423    00F6            BIT1001
0424    00F6    3003    	MOVLW	B'00000011' ; EN W SE ENCUENTRA 0001100
0425    00F7    00A1    	MOVWF	DATO		; DE W A F LE MOVEMOS F
0426    00F8    28F9    	GOTO DISPLAY
0427    00F9            	
0428    00F9            
0429    00F9            DISPLAY
0430    00F9    0821    	MOVF	DATO, W
0431    00FA    0087    	MOVWF	PORTC	
0432    00FB    0008    	RETURN
0433    00FC            ;;;;;;; FINALIZA MOSTRAR DISPLAY ;;;;;;;;;
---------------------------------------------
Number of errors = 0
